
@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />


@using (Html.BeginForm("Payment", "ThanhToan", FormMethod.Post))
{
    <div class="container">
        <div class="row">
            <div class="col-md-4 order-md-2 mb-4">
                <h4 class="d-flex justify-content-between align-items-center mb-3">
                    <span class="text-muted">Giỏ hàng</span>
                </h4>
                @if (Model != null && Model.Cart != null)
                {
                    <ul class="list-group mb-3">
                        @foreach (var i in Model.Cart.ListItem)
                        {
                            <li class="list-group-item d-flex justify-content-between lh-condensed">
                                <div>
                                    <h6 class="my-0">@i.TenSanPham</h6>
                                    <small class="text-muted">@i.SoLuong</small>
                                </div>
                                <span class="text-muted">
                                    @if (i.PhanTramGiamGia > 0)
                                    {

                                        <span>@((i.TongDon - ((i.TongDon * i.PhanTramGiamGia) / 100)).ToString("N0")) VNĐ </span>
                                    }
                                    else
                                    {

                                        <span>@i.TongDon.ToString("N0") VNĐ</span>
                                    }
                                </span>
                            </li>
                         }
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Tổng cộng</span>
                                <strong>@Model.Cart.GetTotal().ToString("N0")&nbsp;VNĐ</strong>
                            </li>
                        
                    </ul>
                 }

                    <div class="card p-2">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Mã giảm giá">
                            <div class="input-group-append">
                                <a class="btn btn-secondary">Sử dụng</a>
                            </div>
                        </div>
                    </div>
                </div>
            <div class="col-md-8 order-md-1">
                <h4 class="mb-3">Thông tin nhận hàng</h4>
                <form class="needs-validation" novalidate>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstName">Họ và tên</label>
                            <input type="text" class="form-control" name="hoten" id="hoten" required>
                            <div class="invalid-feedback">
                                Valid first name is required.
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email">Email <span class="text-muted">(Không bắt buộc)</span></label>
                        <input type="email" class="form-control" name="email" id="emil">
                        <div class="invalid-feedback">
                            Please enter a valid email address for shipping updates.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address">Địa chỉ</label>
                        <input type="text" class="form-control" name="diachi" id="diachi" required>
                        <div class="invalid-feedback">
                            Please enter your shipping address.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address2">Số điện thoại</label>
                        <input type="text" class="form-control" name="sodienthoai" id="sodienthoai" required>
                    </div>

                    <div class="mb-3 form-row">
                        <label for="exampleFormControlTextarea1">Ghi chú <span class="text-muted">(Không bắt buộc)</span></label>
                        <textarea class="form-control" name="ghichu" id="ghichu" rows="3"></textarea>
                    </div>

                    <br />
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="save-info" required>
                        <label class="custom-control-label" for="save-info" >Đồng ý với các điều khoản và điều kiện</label>
                    </div>
                    <br />
                    <button class="btn btn-primary btn-lg btn-block" type="submit"name="thanhtoan" id="thanhtoan">Thanh toán bằng Momo</button>
                    <br />
                </form>
            </div>
        </div>
    </div>
}
    @*    <script>
            // Example starter JavaScript for disabling form submissions if there are invalid fields
            (function () {
                'use strict';
                window.addEventListener('load', function () {
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    var forms = document.getElementsByClassName('needs-validation');
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(forms, function (form) {
                        form.addEventListener('submit', function (event) {
                            if (form.checkValidity() === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add('was-validated');
                        }, false);
                    });
                }, false);
            })();
        </script>*@
    @*
        <script type="text/javascript">
            function validate1() {
                var
                    hoten = $('#hoten'),
                    diachi = $('#diachi'),
                    sodt = $('#sodienthoai'),
                if (hoten.val() == '') {
                    hoten.focus();
                    return false;
                }
                else {
                    hoten.css({ "border": "1px solid #d3d3d3" });
                }
                if (diachi.val() == '') {
                    diachi.focus();
                    return false;
                }
                else {
                    diachi.css({ "border": "1px solid #d3d3d3" });
                }
                if (sodt.val() == '') {
                    sodt.focus();
                    return false;
                }
                else {
                    sodt.css({ "border": "1px solid #d3d3d3" });
                }
                if (email.val() == '') {
                    email.focus();
                    return false;
                }
                return true;
            }
        </script>
    *@